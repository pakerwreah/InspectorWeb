(function(){var e={8601:function(e,t,s){"use strict";var i=s(144),a=s(998),r=s(4562),n=s(7426),o=s(7394),l=s(1267),c=s(8003),u=s(4324),d=s(3201),h=s(1713),p=s(3687),m=s(535),f=s(5157),v=s(8754),g=s(8491),_=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(a.Z,[t(n.Z,[t(m.Z,{attrs:{"non-linear":""},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}},[t(v.Rp,[e._l(e.pages,(function(s,i){return t(g.Z,{key:i,attrs:{step:i+1,complete:e.current_page===i+1,color:"primary",editable:""}},[t(d.Z,[e._v(" "+e._s(s.name)+" "),"network"===s.key&&e.requests>0?t(l.Z,{staticClass:"badge step-badge",attrs:{"align-self-center":"","text-center":""}},[e._v(" "+e._s(e.requests)+" ")]):e._e()],1)],1)})),t(p.Z),t(l.Z,{attrs:{"align-self-center":"","pr-1":"",shrink:""}},[t(l.Z,{attrs:{"align-self-center":"","pr-1":"",shrink:""}},[t(r.Z,{attrs:{icon:""},on:{click:function(t){e.settings_popup=!0}}},[t(u.Z,[e._v("mdi-cog")])],1)],1)],1)],2),t(v.gd,[t(f.Z,{attrs:{step:1}},[t("Database")],1),t(f.Z,{attrs:{step:2}},[t("Network",{attrs:{active:2===e.current_page,settings:e.settings.network,ip:e.host.ip,port:e.settings.port},on:{requests:e.setRequestsCount}})],1),e._l(e.plugins,(function(s,i){return t(f.Z,{key:s.key,attrs:{step:i+3}},[t("Plugin",{attrs:{active:e.current_page===i+3,plugin:s}})],1)}))],2)],1)],1),t(c.Z,{attrs:{app:""}},[t(d.Z,[t(l.Z,[e.electron?t("DevicePicker",{attrs:{devices:e.devices},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}}):t("IPTextField",{model:{value:e.host,callback:function(t){e.host=t},expression:"host"}})],1),t(l.Z,{attrs:{shrink:"","align-self-center":""}},[t(o.Z5,[t(h.Z,{directives:[{name:"show",rawName:"v-show",value:e.current_page<=1,expression:"current_page <= 1"}],staticClass:"mr-2"},[t("span",{staticClass:"version"},[t("span",{class:{strike:e.release}},[e._v("v"+e._s(e.version))]),e.release?t("span",{staticClass:"white--text ml-2"},[e._v("v"+e._s(e.release.name))]):e._e()]),e.release?t(u.Z,{staticClass:"green--text pointer ml-1",attrs:{small:""},on:{click:function(t){return e.open(e.release.url)}}},[e._v(" mdi-download ")]):e._e()],1)],1)],1)],1)],1),t("Settings",{attrs:{settings:e.settings},on:{"update:settings":function(t){e.settings=t}},model:{value:e.settings_popup,callback:function(t){e.settings_popup=t},expression:"settings_popup"}})],1)],1)},b=[],y=s(2933),k=function(){var e=this,t=e._self._c;return t("splitpanes",{staticClass:"default-theme fill-height"},[t("pane",{staticStyle:{"min-width":"250px"},attrs:{size:"15","max-size":"40"}},[t("TreeView",{attrs:{databases:e.databases,currentdb:e.currentdb,schema:e.schema,progress:e.progress},on:{selectDB:e.selectDB,query:e.queryTable}})],1),t("pane",{attrs:{size:"85"}},[t("splitpanes",{attrs:{horizontal:""},on:{resize:e.resize}},[t("pane",[t("SqlConsole",{ref:"console",attrs:{schema:e.schema},on:{query:e.query}}),t(y.Z,{attrs:{absolute:"",value:!e.schema.tables}})],1),e.loading||e.error||e.result?t("pane",[e.error?t("div",{staticClass:"error--text ma-2"},[e._v(e._s(e.error))]):e._e(),t("TableView",{directives:[{name:"show",rawName:"v-show",value:e.loading||!e.error&&e.result,expression:"loading || (!error && result)"}],attrs:{sql:e.last_query,result:e.result,loading:e.loading},on:{reload:e.query}}),!e.error&&e.result?t("div",{staticClass:"result-info"},[e._v(e._s(e.info))]):e._e()],1):e._e()],1)],1)],1)},w=[],q=s(6486),Z=s(6209),x=s(3486),C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"console-wrapper"},[t("div",{staticClass:"d-flex align-center"},[t(r.Z,{staticClass:"ml-3",attrs:{icon:"","x-small":"",color:"neutral"},on:{click:function(t){e.history_popup=!0}}},[t(u.Z,[e._v("mdi-history")])],1),t(r.Z,{staticClass:"ml-2",attrs:{icon:"",small:"",color:"success"},on:{click:e.executeQuery}},[t(u.Z,[e._v("mdi-play")])],1),t(p.Z),t(x.Z,{staticClass:"my-0 py-0 mr-2",attrs:{label:"Script",dense:"","hide-details":""},model:{value:e.script,callback:function(t){e.script=t},expression:"script"}})],1),t("Editor",{ref:"console",attrs:{lang:"mysql",theme:e.theme,options:e.editorOptions},model:{value:e.sql,callback:function(t){e.sql=t},expression:"sql"}}),t("SqlHistory",{on:{selected:e.historySelected},model:{value:e.history_popup,callback:function(t){e.history_popup=t},expression:"history_popup"}})],1)},S=[],$=s(3251),T=s.n($),j=(s(3875),s(2298),s(443),s(5335),s(8656),s(6581),s(2016)),O=s(4145),F=s(4886),R=s(9228),D=s(9223),P=s(8224),B=s(5808),N=s(4525),I=s(6740),E=s(7912),L=function(){var e=this,t=e._self._c;return t(R.Z,{attrs:{"content-class":"sql-history-popup"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(O.Z,{staticClass:"sql-history-container",attrs:{height:"100%"}},[t(F.EB,{staticClass:"pa-1"},[t(d.Z,{staticClass:"text-center"},[t(l.Z,[e._v("SQL History")])],1),t(r.Z,{attrs:{color:"neutral",small:"",icon:"",absolute:"",right:""},on:{click:function(t){e.open=!1}}},[t(u.Z,{attrs:{small:""}},[e._v("mdi-close")])],1)],1),t(F.ZB,{staticClass:"pa-0 flex relative"},[t("splitpanes",{staticClass:"default-theme absolute-expand"},[t("pane",{staticStyle:{"min-width":"250px"},attrs:{size:"40"}},[t(d.Z,{staticClass:"fill-height",attrs:{column:""}},[t(j.Z,{attrs:{mandatory:"",borderless:"",color:"accent"},model:{value:e.favorites,callback:function(t){e.favorites=t},expression:"favorites"}},[t(r.Z,{staticClass:"flex flex-basis-0",attrs:{value:!1,small:""}},[e._v("All")]),t(r.Z,{staticClass:"flex flex-basis-0",attrs:{value:!0,small:""}},[e._v("Favorites")])],1),t(B.Z,{staticClass:"sql-history-list pt-0 overflow-y-auto fill-height",attrs:{dense:""}},[t(E.Z,{attrs:{mandatory:"",color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._l(e.items,(function(s,i){return[t(P.Z,{key:i,scopedSlots:e._u([{key:"default",fn:function({hover:a}){return[t(N.Z,{staticClass:"sql-history-item px-2",class:{selected:e.selected===i},on:{dblclick:function(t){return e.selectItem(s)}}},[t(I.km,[t(I.oZ,[t("small",[e._v(e._s(e.formatTimestamp(s.timestamp)))]),a||s.favorite?t(r.Z,{staticClass:"favorite-btn",attrs:{"x-small":"",icon:""},on:{mousedown:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.toggleFavorite(s)}}},[s.favorite?t(u.Z,{attrs:{color:"accent","x-small":""}},[e._v(" mdi-star ")]):t(u.Z,{attrs:{"x-small":""}},[e._v(" mdi-star-outline ")])],1):e._e()],1),t(I.V9,[e._v(e._s(s.sql))])],1)],1)]}}],null,!0)}),t(D.Z,{key:"divider"+i})]}))],2)],1)],1)],1),t("pane",[t("div",{staticClass:"fill-height overflow-y-auto px-3 pb-5"},[e.selected>=0?t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.items[e.selected].sql,expression:"items[selected].sql"}],class:e.codestyle},[t("code",{staticClass:"sql"})]):e._e()])])],1)],1)],1)],1)},z=[];function A(e){return new Promise((t=>setTimeout(t,e)))}function V(e,t){const s=new Date,i=new Date(e);return t||s.toDateString()!==i.toDateString()?i.toLocaleString():i.toLocaleTimeString()}function M(e){const{sec:t,usec:s}=e,i=[];return t&&i.push(`${t} second`+(t>1?"s":"")),s&&i.push(`${(s/1e3).toFixed(2)} milliseconds`),i.join(" and ")}var H={name:"SqlHistory",components:{Splitpanes:Z.F,Pane:Z.X},props:{value:Boolean},data:()=>({favorites:!1,selected:-1,prev_item:void 0,history:[]}),computed:{open:{get(){return this.value},set(e){this.$emit("input",e)}},codestyle(){return this.dark_mode?"dark":"light"},items(){return this.history.filter((e=>!this.favorites||e.favorite))}},watch:{open:{handler:"initialize",immediate:!0},selected(e){this.prev_item=e>=0?this.items[e]:void 0},items(){const e=this.items.length,t=this.prev_item?this.items.map((e=>e.sql)).indexOf(this.prev_item.sql):-1;t>=0?this.selected=t:(this.favorites||this.selected<0)&&e?this.selected=0:this.selected>=e&&(this.selected=e-1),this.prev_item=this.selected>=0?this.items[this.selected]:void 0}},mounted(){this.keyboard=this.keyboard.bind(this),document.addEventListener("keydown",this.keyboard)},beforeDestroy(){document.removeEventListener("keydown",this.keyboard)},methods:{initialize(){this.history=JSON.parse(localStorage.getItem("sql_history")||"[]"),this.open&&this.selected>=0&&requestAnimationFrame((()=>{this.$vuetify.goTo(".sql-history-item.selected",{container:".sql-history-list",duration:0})}))},toggleFavorite(e){this.$set(e,"favorite",!e.favorite),localStorage.setItem("sql_history",JSON.stringify(this.history))},selectItem({sql:e}){this.$emit("selected",e),this.open=!1},keyboard(e){if(!this.open)return;const t=9,s=13,i=27,a=32,r=38,n=40,o=e.keyCode;switch(o){case i:this.open=!1;break;case t:e.preventDefault(),this.favorites=!this.favorites;break;case a:if(this.selected>=0){e.preventDefault();const t=this.items[this.selected];this.toggleFavorite(t)}break;case s:if(e.preventDefault(),this.selected>=0){const e=this.items[this.selected];this.selectItem(e)}break;case r:case n:{e.preventDefault();const t=this.items.length;t>0&&this.selected>=0&&(o===r?this.selected>0&&this.selected--:this.selected<t-1&&this.selected++,requestAnimationFrame((()=>{const e=document.querySelector(".sql-history-list").clientHeight,t=document.querySelector(".sql-history-item.selected").clientHeight,s=(e-t)/2;this.$vuetify.goTo(".sql-history-item.selected",{container:".sql-history-list",duration:200,offset:s})})));break}}},formatTimestamp:V}},J=H,W=s(1001),U=(0,W.Z)(J,L,z,!1,null,"4ec4e100",null),K=U.exports,Q={name:"SqlConsole",components:{Editor:T(),SqlHistory:K},props:{value:String,schema:Object},data:()=>({sql:"",script:!1,history_popup:!1}),computed:{theme(){return this.dark_mode?"twilight":"chrome"},editor(){return this.$refs.console.editor},editorOptions:()=>({enableBasicAutocompletion:[Y],enableLiveAutocompletion:[Y]})},watch:{schema(e){Object.assign(X,e)},sql(e){localStorage.setItem("sql",e)},script(e){localStorage.setItem("script",e)}},mounted(){this.sql=localStorage.getItem("sql")||"",this.script=JSON.parse(localStorage.getItem("script"))||!1,Object.assign(X,this.schema),this.$on("resize",(()=>{this.editor.resize()}));const e=()=>{this.executeQuery()},t=["Ctrl-Enter","Command-Enter"].map(((t,s)=>({name:"query"+s,bindKey:t,exec:e})));t.forEach((e=>this.editor.commands.addCommand(e)))},methods:{executeQuery(){this.$emit("query",this.editor.getSelectedText()||this.sql,this.script)},historySelected(e){this.sql=e,this.editor.focus()}}};const X={},Y={getCompletions:function(e,t,s,i,a){let r=[];if(X.tables){const a=t.doc.positionToIndex(s),n=e.getValue(),o=/[^a-zA-Z_0-9$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/,l=e=>(Array.isArray(e)?e:Object.keys(e)).filter((e=>e.includes(i))).map((e=>({name:e,value:e}))),c=n.substring(0,a-i.length);if(/\b(from|join|update|table)\b\W+$/i.test(c))r=l(X.tables);else if(c.endsWith(".")){const e=c.substr(0,c.length-1).split(o).pop(),t=X.tables[e];t&&(r=l(t.columns))}if(!r.length&&i.length>=2){for(const[e,t]of Object.entries(X.tables))new RegExp("\\b"+e+"\\b").test(n)&&(r=r.concat(l(t.columns)));r.length||(r=Object.values(X.tables).reduce(((e,t)=>e.concat(l(t.columns))),[]).concat(l(X.tables)))}}a(null,r)}};var G=Q,ee=(0,W.Z)(G,C,S,!1,null,null,null),te=ee.exports,se=s(2499),ie=s(9824),ae=s(2082),re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"result-container"},[t(se.Z,{ref:"dt",staticClass:"result-table fill-height",attrs:{loading:e.loading,"loading-text":"Executing query...",headers:e.headers,items:e.items,"items-per-page":10,"sort-by":e.sort,height:"100%",dense:"","fixed-header":"","footer-props":{"items-per-page-options":[10,20,30,-1]}},scopedSlots:e._u([{key:"no-data",fn:function(){return[t("div",{staticClass:"no-data"},[t("div",[e._v("No data available")])])]},proxy:!0},e.loading?null:{key:"body.prepend",fn:function(){return[t("tr",e._l(e.headers.length,(function(s){return t("td",{directives:[{name:"show",rawName:"v-show",value:e.visible[s-1],expression:"visible[i-1]"}],key:s},[t(ie.Z,{staticClass:"result-search",attrs:{"append-icon":"mdi-magnify","background-color":"controls",autocomplete:"disabled",spellcheck:"false",dense:"","hide-details":""},on:{input:function(t){return e.updateSearch(s-1)}},model:{value:e.search[s-1],callback:function(t){e.$set(e.search,s-1,t)},expression:"search[i-1]"}})],1)})),0)]},proxy:!0}],null,!0)}),t("div",{staticClass:"result-toolbar pt-1"},[e._l(e.toolbar_buttons,(function(s,i){return[t(ae.Z,{key:i,attrs:{right:"",transition:"slide-x-transition","open-delay":"1200","content-class":"px-2 py-0"},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(r.Z,e._g({staticClass:"mb-3",attrs:{icon:"","x-small":"",disabled:!e.headers.length},on:{click:s.action}},i),[t(u.Z,{attrs:{color:s.color}},[e._v(e._s(s.icon))])],1)]}}],null,!0)},[t("span",[e._v(e._s(s.tooltip))])])]}))],2),t("ColumnsFilter",{attrs:{headers:e.headers,"columns-visible":e.visible},on:{"update:columnsVisible":function(t){e.visible=t},"update:columns-visible":function(t){e.visible=t},goto:e.gotoColumn},model:{value:e.columns_filter_popup,callback:function(t){e.columns_filter_popup=t},expression:"columns_filter_popup"}})],1)},ne=[],oe=function(){var e=this,t=e._self._c;return t(R.Z,{attrs:{width:"300","overlay-opacity":"0.1",attach:".result-container","content-class":"columns-filter-popup",scrollable:""},on:{keydown:e.keyboard},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(O.Z,[t(F.EB,{staticClass:"panel pa-1 px-2"},[t(d.Z,[t(l.Z,{attrs:{xs1:"","align-self-center":""}},[t(x.Z,{staticClass:"my-1 py-0",attrs:{dense:"","hide-details":""},model:{value:e.visible_all,callback:function(t){e.visible_all=t},expression:"visible_all"}})],1),t(l.Z,{attrs:{"align-self-center":""}},[t(ie.Z,{ref:"search",staticClass:"result-search ml-2",attrs:{"append-icon":"mdi-magnify","background-color":"controls",autocomplete:"disabled",spellcheck:"false",dense:"","hide-details":"",autofocus:"",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),t(F.ZB,{staticClass:"columns-filter-body px-2 py-2",staticStyle:{"max-height":"300px"}},[e._l(e.headers.keys(),(function(s){return[t(P.Z,{key:s,scopedSlots:e._u([{key:"default",fn:function({hover:i}){return[t(d.Z,{directives:[{name:"show",rawName:"v-show",value:e.listed[s],expression:"listed[i]"}],staticClass:"columns-filter-item",class:{selected:e.selected===s}},[t(l.Z,{attrs:{xs1:"","align-self-center":""}},[t(x.Z,{staticClass:"my-0 py-1 mr-2",attrs:{dense:"","hide-details":""},model:{value:e.visible[s],callback:function(t){e.$set(e.visible,s,t)},expression:"visible[i]"}})],1),t(l.Z,{staticClass:"ml-2 align-stretch"},[t(d.Z,{staticClass:"pointer noselect fill-height",on:{click:function(t){return e.toggleVisible(s)}}},[t(l.Z,{attrs:{"align-self-center":""},domProps:{innerHTML:e._s(e.listed[s])}})],1)],1),t(l.Z,{staticClass:"ml-2",attrs:{xs1:"","align-self-center":""}},[e.visible[s]?t(r.Z,{attrs:{icon:"","x-small":"",color:i?"primary":"transparent"},on:{click:function(t){return e.gotoColumn(s)}}},[t(u.Z,{staticClass:"pointer"},[e._v("mdi-target")])],1):e._e()],1)],1)]}}],null,!0)})]}))],2)],1)],1)},le=[],ce=s(7360),ue=s.n(ce),de={name:"ColumnsFilter",props:{value:Boolean,headers:Array,columnsVisible:Array},data:()=>({search:"",selected:-1}),computed:{open:{get(){return this.value},set(e){this.$emit("input",e)}},visible_all:{get(){return this.visible.every((e=>e))},set(e){this.fillVisible(e)}},visible(){return new Proxy(this.columnsVisible,{set:(e,t,s)=>(isNaN(t)||this.updateVisible(Object.assign([...e],{[t]:s})),!0)})},listed(){return this.search?this.prepared_search_headers.map((e=>ue().single(this.search,e))).map((e=>e&&e.score>-100&&ue().highlight(e,"<b class='primary--text'>","</b>"))):this.headers.map((e=>e.text))},prepared_search_headers(){return this.headers.map((e=>ue().prepare(e.text)))}},watch:{value(e){e&&(this.search="",this.selected=-1,requestAnimationFrame((()=>{this.$refs.search.focus()})))},search(){const e=this.selected;e>=0&&!this.listed[e]&&(this.selected=-1)}},created(){this.keyboard=(0,q.throttle)(this.keyboard,100)},methods:{updateVisible(e){this.$emit("update:columns-visible",e)},fillVisible(e){this.updateVisible(Array(this.headers.length).fill(e))},toggleVisible(e){this.visible[e]=!this.visible[e],this.selected=e},gotoColumn(e){this.$emit("goto",e-this.visible.filter(((t,s)=>s<e&&!t)).length)},keyboard(e){const t=13,s=32,i=38,a=40,r=e.keyCode;let n=this.selected;const o=(0,q.findIndex)(this.listed),l=(0,q.findLastIndex)(this.listed);switch(r){case t:while(n<=l&&(!this.listed[n]||!this.visible[n]))n++;n>=0&&n<=l&&(this.gotoColumn(n),this.open=!1);break;case s:e.preventDefault(),n>=0&&this.toggleVisible(n);break;case i:case a:if(e.preventDefault(),r===i)if(n<0||!this.listed[n])n=l;else do{n--}while(n>=0&&!this.listed[n]);else if(n<0||!this.listed[n])n=o;else do{n++}while(n<=l&&!this.listed[n]);this.selected!==n&&n>=o&&n<=l&&(this.selected=n,requestAnimationFrame((()=>{this.$vuetify.goTo(".columns-filter-item.selected",{container:".columns-filter-body",offset:150,duration:200})})));break}}}},he=de,pe=(0,W.Z)(he,oe,le,!1,null,null,null),me=pe.exports,fe={name:"TableView",components:{ColumnsFilter:me},props:{sql:String,result:Object,loading:Boolean},data:()=>({search:[],search_debounced:[],columns_filter_popup:!1,visible:[],sort:[],last_headers:[],scroll:0}),computed:{toolbar_buttons(){return[{icon:"mdi-table-row-remove",color:"neutral",tooltip:"Filter columns",action:()=>this.showColumnFilter()},{icon:"mdi-sync",color:"primary",tooltip:"Reload",action:()=>this.$emit("reload",this.sql)}]},headers(){const e=e=>t=>!(this.search_debounced[e]||"").length||String(t).toLowerCase().includes(this.search_debounced[e].toLowerCase());return this.loading?[]:(0,q.get)(this.result,"headers",[]).map(((t,s)=>({text:t,value:s.toString(),align:this.visible[s]?"":" d-none",filter:e(s)})))},items(){const e=Object.keys((0,q.get)(this.result,"headers",[]));return this.loading?[]:(0,q.get)(this.result,"data",[]).map((t=>(0,q.zipObject)(e,t)))},updateSearch(){return(0,q.debounce)((e=>{this.$set(this.search_debounced,e,this.search[e])}),Math.min(70*this.items.length/1e4,1e3))}},watch:{result(e){e&&((0,q.isEqual)(e.headers,this.last_headers)||(this.last_headers=e.headers,this.fillVisible(!0),this.search.fill(""),this.search_debounced.fill(""),this.sort=[],this.scroll=0),requestAnimationFrame((()=>{const e=this.$refs.dt.$el.querySelector(".v-data-table__wrapper");e.addEventListener("scroll",this.onScroll),e.scrollTo({left:this.scroll})})))},visible(e){e.forEach(((e,t)=>{e||(this.search[t]="",this.search_debounced[t]="")}))}},created(){this.onScroll=this.onScroll.bind(this)},mounted(){this.fillVisible(!0)},methods:{onScroll(e){this.loading||(this.scroll=e.target.scrollLeft)},fillVisible(e){this.headers&&(this.visible=Array(this.headers.length).fill(e))},showColumnFilter(){this.columns_filter_popup=!0},gotoColumn(e){const t=this.$refs.dt.$el,s=t.querySelector("th.primary--text");s&&s.classList.remove("primary--text");const i=t.querySelectorAll("th:not(.d-none)"),a=t.querySelector(".v-data-table__wrapper"),r=a.getBoundingClientRect(),n=i[e].getBoundingClientRect(),o=i[0].getBoundingClientRect().left-r.left-12,l=n.left-r.left-(r.width-n.width)/2-o;a.scrollTo({left:l,behavior:"smooth"}),i[e].classList.add("primary--text")}}},ve=fe,ge=(0,W.Z)(ve,re,ne,!1,null,null,null),_e=ge.exports,be=s(3305),ye=s(8127),ke=s(1583),we=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-container"},[t(ye.Z,{staticClass:"database-picker",attrs:{"background-color":"panel",placeholder:"No databases available","prepend-inner-icon":"mdi-database","append-icon":null,items:e.databases,disabled:!e.items,readonly:1===e.databases.length,"menu-props":{offsetY:!0,disabled:e.databases.length<1},"hide-details":"","hide-selected":"",filled:"",solo:"",dense:"",flat:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),t(r.Z,{staticClass:"database-sync",attrs:{icon:"","x-small":"",color:"neutral"},on:{click:function(t){return e.selectDB(e.selected)}}},[t(u.Z,[e._v("mdi-sync")])],1),e.items?t(ke.Z,{staticClass:"database-tree",attrs:{open:e.open,items:e.items,activatable:""},on:{"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"label",fn:function({item:s,leaf:i}){return[t(l.Z,{staticClass:"noselect text-truncate",on:{dblclick:function(t){!i&&e.query(s.name)}}},[e._v(" "+e._s(s.name)+" ")])]}},{key:"append",fn:function({item:s}){return[t("span",{staticClass:"noselect accent--text text-lowercase pt-1 pl-2",staticStyle:{"font-size":"10px"}},[e._v(" "+e._s(s.type)+" ")])]}},{key:"prepend",fn:function({item:s,leaf:i}){return[i?[t(ae.Z,{attrs:{bottom:"","offset-overflow":"",color:"black"},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[s.pk&&s.fk?t("div",e._g({staticStyle:{position:"relative"}},i),[t(u.Z,{attrs:{color:"amber"}},[e._v(" mdi-key-variant ")]),t(u.Z,{staticStyle:{position:"absolute",left:"3px"},attrs:{color:"green"}},[e._v(" mdi-key-variant ")])],1):s.pk?t(u.Z,{attrs:{color:"amber"}},[e._v(" mdi-key-variant ")]):s.fk?t(u.Z,e._g({attrs:{color:"green"}},i),[e._v(" mdi-key-variant ")]):t(u.Z,{attrs:{color:"primary"}},[e._v(" mdi-table-column ")])]}}],null,!0)},[t("span",[e._v(e._s(s.fk))])])]:t("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.toggle(s.name)}}},[t(u.Z,{attrs:{color:"primary"}},[e._v(" mdi-table-large ")])],1)]}}],null,!1,1426535915)}):t(be.Z,{staticClass:"ma-auto align-self-center progress",attrs:{value:e.progress,indeterminate:e.progress<0,size:"80",width:"2",color:"primary"}},[e.progress>=0?t("span",[e._v(e._s(e.progress)+"%")]):e._e()])],1)},qe=[],Ze={name:"TreeView",props:{schema:Object,progress:Number,databases:Array,currentdb:Number},data:()=>({items:null,open:[]}),computed:{selected:{get(){return this.databases[this.currentdb]},set(e){this.selectDB(e)}}},watch:{schema(){this.loadSchema()}},mounted(){this.loadSchema()},methods:{selectDB(e){this.$emit("selectDB",this.databases.indexOf(e))},toggle(e){this.open.includes(e)?this.open=this.open.filter((t=>t!==e)):this.open.push(e)},async query(e){this.$emit("query",e)},loadSchema(){if(this.schema.tables){const e=[];for(const[t,s]of Object.entries(this.schema.tables)){const i=[];for(const[e,a]of Object.entries(s.columns))i.push({id:`${t}.${e}`,name:e,...a});e.push({id:t,name:t,children:i})}this.items=e}else this.items=null}}},xe=Ze,Ce=(0,W.Z)(xe,we,qe,!1,null,null,null),Se=Ce.exports,$e={name:"Database",components:{Splitpanes:Z.F,Pane:Z.X,SqlConsole:te,TableView:_e,TreeView:Se},data:()=>({m_id:0,progress:0,currentdb:0,databases:[],schema:{},result:null,error:null,loading:!1,info:"",last_query:null}),mounted(){this.getDatabases()},beforeDestroy(){this.m_id++},methods:{resize(){this.$refs.console.$emit("resize")},queryTable(e){this.query(`SELECT * FROM ${e}`)},async query(e,t){if(!this.loading){this.error=null,this.loading=!0,this.info="";try{this.result=(await this.$http.post("/database/"+(t?"execute":"query"),e)).data,this.last_query=e,setTimeout((()=>this.resize()),300),this.info="Runtime: "+M(this.result.duration),/(^|\s)(create|alter|drop)\s/gi.test(e)&&await this.loadSchema(this.m_id);let s=JSON.parse(localStorage.getItem("sql_history")||"[]");e=e.trim();const i=s.find((t=>t.sql===e))||{sql:e};i.timestamp=(new Date).getTime(),s=s.filter((t=>t.sql!==e));const a=s.filter((e=>e.favorite));s=s.filter((e=>!e.favorite)).slice(0,99).concat(a),s.unshift(i),s.sort(((e,t)=>e.timestamp<t.timestamp?1:-1)),localStorage.setItem("sql_history",JSON.stringify(s))}catch(s){this.error=(0,q.get)(s,"response.data.msg",s.message)}this.loading=!1}},shouldRetry(e){return![400,500].includes((0,q.get)(e,"response.status",500))},async getDatabases(){const e=this.m_id;while(e===this.m_id){if(this.$http.defaults.baseURL)try{this.error=null,this.progress=-1;const t=await this.$http.get("/database/list");return this.databases=t.data.databases,this.currentdb=t.data.current,void(this.databases.length?await this.loadSchema(e):this.schema={tables:{}})}catch(t){if(!this.shouldRetry(t))return this.schema={tables:{}},void(this.error=(0,q.get)(t,"response.data.msg"))}await A(3e3)}},async selectDB(e){if(e<0)return this.getDatabases().catch((()=>!1));const t=this.m_id,s=3;for(let a=0;a<s&&t===this.m_id;a++)try{return this.error=null,this.progress=-1,this.schema={},await this.$http.put("/database/current/"+e),this.currentdb=e,void await this.loadSchema(t)}catch(i){if(!this.shouldRetry(i))return this.schema={tables:{}},void(this.error=(0,q.get)(i,"response.data.msg"));a<s-1?await A(500):this.getDatabases().catch((()=>!1))}},async getTables(){const e="\n                                SELECT name\n                                FROM sqlite_master\n                                WHERE type = 'table'\n                                AND name NOT IN ('android_metadata', 'sqlite_sequence')\n                                ORDER BY name\n                            ",t=await this.$http.post("/database/query",e);return t.data.data.map((e=>e[0]))},async getColumns(e){const t=`pragma table_info(${e})`,s=await this.$http.post("/database/query",t),i=s.data.data,a=e=>s.data.headers.indexOf(e),r={};for(const n of i)r[n[a("name")]]={type:n[a("type")],notnull:!!n[a("notnull")],dflt_value:n[a("dflt_value")],pk:!!n[a("pk")]};return r},async getForeignKeys(e){const t=`pragma foreign_key_list(${e})`,s=await this.$http.post("/database/query",t),i=s.data.data,a=e=>s.data.headers.indexOf(e),r=[];for(const n of i)r.push({from:n[a("from")],table:n[a("table")],to:n[a("to")]});return r},async loadTable(e,t,s){const i=3;for(let r=0;e===this.m_id;r++)try{const e=await this.getColumns(s),i=await this.getForeignKeys(s);for(const t of i)e[t.from].fk=`${t.table} (${t.to})`;return void(t.tables[s]={columns:e})}catch(a){if(r===i-1)throw a}},async loadSchema(e){const t={tables:{}};this.progress=0;const s=3;for(let a=0;e===this.m_id;a++)try{const s=await this.getTables();for(const[i,a]of Object.entries(s))if(await this.loadTable(e,t,a),i%3===0){const e=100*(parseInt(i)+1)/s.length;this.progress=Math.round(e)}return this.progress=100,void setTimeout((()=>{this.schema=t}),150)}catch(i){if(!(a<s-1&&this.shouldRetry(i)))throw i;await A(500)}}}},Te=$e,je=(0,W.Z)(Te,k,w,!1,null,"145a8e07",null),Oe=je.exports,Fe=s(7821),Re=function(){var e=this,t=e._self._c;return t("splitpanes",{staticClass:"network-panel default-theme fill-height"},[t("pane",{staticStyle:{"min-width":"250px"},attrs:{size:100-e.detail_size}},[t("div",{ref:"scroll",staticClass:"network-container absolute-expand overflow-y-auto",class:{"pt-10":e.is_searching}},[e.session_list.length?t(B.Z,{attrs:{dense:""}},[t(E.Z,{attrs:{color:"primary"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.session_list,(function(s,i){return t("div",{key:i},[e.is_searching?e._e():t("div",{staticClass:"text-center text--text font-weight-bold pt-4"},[e._v(" "+e._s(e.formatTimestamp(s.timestamp,!0))+" ")]),e._l(s.requests.map((t=>e.requests[t])),(function(s){return[t(N.Z,{directives:[{name:"show",rawName:"v-show",value:e.requests_visibility[s.uid],expression:"requests_visibility[request.uid]"}],key:s.uid,staticClass:"request-item",attrs:{"two-line":""}},[t(I.km,{staticClass:"py-0"},[t(I.V9,{staticClass:"pt-2"},[t("span",{staticClass:"method",class:s.headers.method.toLowerCase()},[e._v(" "+e._s(s.headers.method)+" ")]),e._v(" "+e._s(s.headers.url.pathname)+" ")]),t(I.oZ,{staticClass:"origin pb-2"},[e._v(" "+e._s(s.headers.url.origin)+" ")])],1),t("div",{staticClass:"mr-3"},[t("table",[t("tr",{staticClass:"request-info"},[t("td",{staticClass:"request-status",class:e.statusColor(s.status)},[s.status?t("span",{staticClass:"font-weight-bold"},[e._v(" "+e._s(s.status)+" ")]):t(u.Z,{staticClass:"request-loading"},[e._v("mdi-timelapse")])],1),t("td",{staticClass:"request-timestamp font-weight-bold text-right"},[e._v(" "+e._s(e.formatTimestamp(s.timestamp))+" ")])]),s.response?t("tr",{staticClass:"v-list-item__subtitle request-info"},[t("td",[e._v(e._s(e.formatDuration(s.response.timestamp-s.timestamp)))]),t("td",{staticClass:"text-right"},[e._v(e._s(e.filesize(s.response.body.size)))])]):e._e()])])],1)]}))],2)})),0)],1):e._e()],1),t(Fe.Z,{staticClass:"close_menu",attrs:{"open-on-hover":"",bottom:"",right:"",fixed:""},scopedSlots:e._u([{key:"activator",fn:function(){return[t(ae.Z,{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.b0,{attrs:{"hide-on-leave":""}},[t(r.Z,e._g({directives:[{name:"show",rawName:"v-show",value:e.clear_visible,expression:"clear_visible"},{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearEndedRequests.apply(null,arguments)}}},s),[t(u.Z,[e._v("mdi-trash-can-outline")])],1)],1)]}}])},[t("span",[e._v("Clear finished")])])]},proxy:!0}])},[t(ae.Z,{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(r.Z,e._g({directives:[{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearPreviousRequests.apply(null,arguments)}}},s),[t(u.Z,[e._v("mdi-upload-off")])],1)]}}])},[t("span",[e._v("Clear previous requests")])]),t(ae.Z,{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(r.Z,e._g({directives:[{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.clearAllRequests.apply(null,arguments)}}},s),[t(u.Z,[e._v("mdi-skull-outline")])],1)]}}])},[t("span",[e._v("Clear all requests")])])],1),t(ie.Z,{directives:[{name:"show",rawName:"v-show",value:e.search_enabled,expression:"search_enabled"}],ref:"search",staticClass:"network_search",attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search...",autocomplete:"disabled",spellcheck:"false","hide-details":"",clearable:""},on:{"click:clear":e.clearSearch},model:{value:e.search_filter,callback:function(t){e.search_filter=t},expression:"search_filter"}})],1),t("pane",{attrs:{size:e.detail_size}},[t("splitpanes",{staticClass:"default-theme fill-height",attrs:{horizontal:""}},[t("pane",[t("RequestViewer",{attrs:{"sort-params":e.settings.sort_params},model:{value:e.selected_request,callback:function(t){e.selected_request=t},expression:"selected_request"}})],1),t("pane",[t("RequestViewer",{model:{value:e.selected_response,callback:function(t){e.selected_response=t},expression:"selected_response"}})],1)],1)],1)],1)},De=[],Pe=s(6755),Be=s.n(Pe);function Ne(){return new Promise(((e,t)=>{const s=indexedDB.open("network",2);s.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("requests")&&t.deleteObjectStore("requests"),t.createObjectStore("requests",{keyPath:"uid"})},s.onsuccess=t=>{e(t.target.result)},s.onerror=e=>{t(e)}}))}var Ie={async putRequest(e){const t=await Ne();t.transaction(["requests"],"readwrite").objectStore("requests").put(e)},async getRequests(){const e=await Ne();return new Promise(((t,s)=>{const i=e.transaction(["requests"]).objectStore("requests").getAll();i.onsuccess=e=>{t(e.target.result)},i.onerror=e=>{s(e)}}))},async clearRequests(){const e=await Ne();e.transaction(["requests"],"readwrite").objectStore("requests").clear()}},Ee=(s(8675),s(7380),s(1118),s(2635)),Le=s.n(Ee),ze=s(8764)["Buffer"];function Ae(e){const t=document.createElement("a");return t.href=e,{pathname:t.pathname,origin:t.origin,search:t.search}}function Ve(e){const t={};for(const s of e.split("\n")){const[e,i]=s.split(": ");e&&(t[e.toLowerCase()]=i)}return t.url=Ae(t.url),t}function Me(e){const t=new Uint8Array(e.data);let s=-1;for(let i=0;i<t.length&&s<0;i++)"\n"===String.fromCharCode(t[i])&&"\n"===String.fromCharCode(t[i+1])&&(s=i+1);if(s>=0){const i=new TextDecoder("utf-8");let a=i.decode(t.slice(0,s)).toString().split("\n");const r=a.splice(0,1).pop(),n=a.join("\n");a=Ve(n);const o=new Blob([Le().gunzipSync(ze.from(e.data,s+1))],{type:a["content-type"]});return{uid:r,headers:a,raw_headers:n,body:o}}return!1}var He=s(255),Je=s(2348),We=s(400),Ue=s(1214),Ke=s(8654),Qe=s(9258),Xe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"network-detail-container"},[e.request?t(Ue.Z,{attrs:{value:e.open,accordion:""}},[t(He.Z,[t(We.Z,[t(d.Z,[t(l.Z,{attrs:{"align-self-center":""}},[e._v(" Headers ")]),t(l.Z,[t(Ke.Z,[t("small",{staticClass:"pointer"},[e._v(e._s(e.formatTimestamp(e.request.timestamp,!0)))])])],1)],1)],1),t(Je.Z,[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.details.headers,expression:"details.headers"}],class:e.codestyle},[t("code",{staticClass:"http"})]),e.params?[t(D.Z,{staticClass:"mt-2 mb-1"}),t(Ke.Z,[t("small",[e._v("Parameters:")])]),t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.params,expression:"params"}],staticClass:"ml-2",class:e.codestyle},[t("code",{staticClass:"yaml"})])]:e._e()],2)],1),e.hasBody?t(He.Z,[t(We.Z,[t(d.Z,[t(l.Z,{attrs:{xs11:"","align-self-center":""}},[e._v(" Body ")]),t(l.Z,{staticClass:"ml-4"},[e.details.large?t(ae.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(r.Z,e._g({attrs:{icon:"","x-small":""},on:{click:function(t){return t.stopPropagation(),e.download.apply(null,arguments)}}},s),[t(u.Z,[e._v("mdi-download")])],1)]}}],null,!1,1227726359)},[t("span",[e._v("Download")])]):t(ae.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(r.Z,e._g({attrs:{icon:"","x-small":""},on:{click:function(t){return t.stopPropagation(),e.copy.apply(null,arguments)}}},s),[t(u.Z,[e._v("mdi-content-copy")])],1)]}}],null,!1,3789031539)},[t("span",[e._v("Copy")])])],1)],1)],1),t(Je.Z,[e.json||e.html?t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.details.body,expression:"details.body"}],class:e.codestyle},[t("code",{class:{json:e.json,html:e.html}})]):t(Ke.Z,[e._v(" "+e._s(e.details.body)+" ")])],1)],1):e._e()],1):e._e(),t(Qe.Z,{attrs:{top:"",color:"success",timeout:2e3},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[t(l.Z,{staticClass:"text-center"},[t("h3",[e._v(e._s(e.snackbar.text))])])],1)],1)},Ye=[],Ge=s(8206),et=s(9831),tt={name:"RequestViewer",props:{value:Object,sortParams:Boolean},data:()=>({details:{headers:"",body:"",large:!1},snackbar:{visible:!1,text:""}}),computed:{open(){return this.hasBody&&!this.urlencoded?1:0},codestyle(){return this.dark_mode?"dark":"light"},request(){return this.value},headers(){return this.request&&this.request.headers||{}},raw_headers(){return this.request&&this.request.raw_headers||""},params(){let e=this.get?this.headers.url.search:this.urlencoded&&this.details.body;return e?(e=e.split(/[?&]/).map((e=>e.replace("=",": "))).map((e=>decodeURIComponent(e))),this.sortParams&&(e=e.sort(((e,t)=>e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})))),e.join("\n").trim()):null},contentType(){return this.headers["content-type"]||""},get(){return"GET"===this.headers.method},json(){return this.contentType.includes("application/json")||this.hasBody&&["{","["].includes(this.details.body[0])},html(){return this.contentType.includes("text/html")},urlencoded(){const e=this.details.body;return this.contentType.includes("application/x-www-form-urlencoded")||!this.json&&!e.includes("\n")&&(e.startsWith("?")||e.includes("=")||e.includes("&"))},hasBody(){return!(!this.request||!this.request.body.size)}},watch:{request(){this.updateDetails()}},mounted(){this.updateDetails()},methods:{updateDetails(){this.details={headers:"",body:"",large:!1};const e=this.request;if(e){const t=e.raw_headers;this.$set(this.details,"headers",t),e.body&&(e.body.size>1e5?(this.$set(this.details,"large",!0),this.$set(this.details,"body","[ Size: "+Be()(e.body.size)+" ]")):st(t,e.body).then((t=>{if(this.request===e){if(this.json||["{","["].includes(t[0])){const e=JSON.parse(t);e&&(t=JSON.stringify(e,null,2))}this.$set(this.details,"body",t)}})))}},download(){(0,et.Z)(this.request.body,`${this.request.timestamp}.txt`)},copy(){st(this.request.raw_headers,this.request.body).then((e=>{(0,Ge.Z)(e),this.snackbar={visible:!0,text:"Content copied successfully!"}}))},formatTimestamp:V}};function st(e,t){return new Promise((s=>{const i=new FileReader;i.onloadend=e=>{s(e.target.result)};let a="utf-8";const r=/charset=([^;\n ]+)/.exec(e);r&&(a=r[1]),i.readAsText(t,a)}))}var it=tt,at=(0,W.Z)(it,Xe,Ye,!1,null,"ff1c532e",null),rt=at.exports,nt={name:"Network",components:{Splitpanes:Z.F,Pane:Z.X,RequestViewer:rt},props:{active:Boolean,settings:Object,ip:String,port:String},data:()=>({session_list:[],requests:{},selected:void 0,clear_visible:!1,ws_request:null,ws_response:null,ws_request_reconnect_timeout:null,ws_response_reconnect_timeout:null,search_filter:"",search_enabled:!1}),computed:{host(){return this.ip&&this.port&&`${this.ip}:${this.port}`},reconnect(){return(0,q.debounce)((()=>{this.disconnect(),this.connect()}),1500)},detail_size(){return void 0!==this.selected?40:0},session(){const e=this.session_list.length;return e?this.session_list[e-1]:{}},selected_request(){if(void 0!==this.selected){const e=(0,q.sortBy)(Object.values(this.requests),"timestamp");return e[this.selected]}},selected_response(){const e=this.selected_request;if(e)return e.response},total_requests(){return Object.keys(this.requests).length},is_searching(){return this.search_filter?.trim().length>0},requests_visibility(){const e=this.search_filter?.trim().toLowerCase(),t=({pathname:e,origin:t})=>[e,t].map((e=>e.toLowerCase())),s=s=>!e||t(s).findIndex((t=>t.includes(e)))>=0,i=this.session_list.flatMap((({requests:e})=>e.map((e=>this.requests[e])))),a={};for(const r of i)a[r.uid]=s(r.headers.url);return a}},watch:{host(e){e&&this.reconnect()},active:{handler(e){e?(setTimeout((()=>{this.clear_visible=!0,this.scrollBottom()}),500),this.connect()):(this.clear_visible=!1,this.settings.sleep?this.disconnect():this.connect())},immediate:!0},"settings.sleep"(e){this.active||(e?this.disconnect():this.connect())},total_requests(e){this.$emit("requests",e),this.stickyBottom()}},mounted(){document.addEventListener("keydown",this.nextItem),document.addEventListener("keydown",this.toggleSearch),this.getHistory().then((()=>{this.autoClearRequests(),this.$nextTick((()=>{this.scrollBottom()}))}))},beforeDestroy(){document.removeEventListener("keydown",this.nextItem),document.removeEventListener("keydown",this.toggleSearch),this.disconnect()},methods:{connect(){this.ws_request||this.openRequest(),this.ws_response||this.openResponse()},disconnect(){this.closeSocket(this.ws_request),this.ws_request=null,this.closeSocket(this.ws_response),this.ws_response=null},closeSocket(e){e&&(e.onmessage=null,e.onclose=null,e.close())},nextVisible(e,t){const s=Object.values(this.requests_visibility);for(let i=e+t;i>=0&&i<s.length;i+=t)if(s[i])return i},nextItem(e){if(this.active){let t;38===e.keyCode?t=this.nextVisible(this.selected??Object.keys(this.requests).length,-1):40===e.keyCode&&(t=this.nextVisible(this.selected??-1,1)),t>=0&&(e.preventDefault(),this.selected=t)}},newSession:()=>({timestamp:(new Date).getTime(),requests:[]}),openRequest(){if(this.closeSocket(this.ws_request),this.ws_request=null,!this.active&&this.settings.sleep)return;if(!this.host)return;let e=!0;const t=this.ws_request=new WebSocket(`ws://${this.host}/network/request`);t.binaryType="arraybuffer",t.onopen=()=>{console.info("Request channel opened!")},t.onmessage=t=>{const s=Me(t);if(s){!e&&this.session_list.length||(this.session_list.push(this.newSession()),e=!1),s.session=this.session.timestamp,s.timestamp=(new Date).getTime();const t=this.session.requests;t.includes(s.uid)||t.push(s.uid),this.$set(this.requests,s.uid,s),Ie.putRequest(s),this.autoClearRequests()}},t.onclose=()=>{this.ws_request===t&&(console.info("Request channel closed!"),this.ws_request=null,this.ws_request_reconnect_timeout&&clearTimeout(this.ws_request_reconnect_timeout),this.ws_request_reconnect_timeout=setTimeout((()=>this.openRequest()),3e3))}},openResponse(){if(this.closeSocket(this.ws_response),this.ws_response=null,!this.active&&this.settings.sleep)return;if(!this.host)return;const e=this.ws_response=new WebSocket(`ws://${this.host}/network/response`);e.binaryType="arraybuffer",e.onopen=()=>{console.info("Response channel opened!")},e.onmessage=e=>{const t=Me(e);if(t){const e=this.requests[t.uid];e&&(t.timestamp=(new Date).getTime(),e.status=t.headers.status,e.response=t,this.$set(this.requests,t.uid,{...e}),Ie.putRequest(e))}},e.onclose=()=>{this.ws_response===e&&(console.info("Response channel closed!"),this.ws_response=null,this.ws_response_reconnect_timeout&&clearTimeout(this.ws_response_reconnect_timeout),this.ws_response_reconnect_timeout=setTimeout((()=>this.openResponse()),3e3))}},async getHistory(){const e=(0,q.sortBy)(await Ie.getRequests(),"timestamp"),t={},s={};for(const i of e){const e=t[i.session]||this.newSession();e.timestamp=i.session,e.requests.push(i.uid),t[i.session]=e,s[i.uid]=i}this.session_list=(0,q.sortBy)(Object.values(t),"timestamp"),this.requests=s},autoClearRequests(){const e=this.settings.limit;this.total_requests>e&&(this.clearPreviousRequests(),this.total_requests>e&&this.clearEndedRequests())},clearAllRequests(){this.session_list=[],this.requests={},this.selected=void 0,Ie.clearRequests()},clearPreviousRequests(){if(this.session_list.length){const e=this.session,t=(0,q.pickBy)(this.requests,(t=>t.session===e.timestamp)),s=Object.values(t);this.session_list=[e],this.requests=t,this.selected=void 0,Ie.clearRequests(),s.forEach(Ie.putRequest)}},clearEndedRequests(){if(this.session_list.length){const e=this.session,t=(0,q.pickBy)(this.requests,(t=>!t.status&&t.session===e.timestamp)),s=Object.values(t);e.requests=s.map((e=>e.uid)),this.session_list=s.length?[e]:[],this.requests=t,this.selected=void 0,Ie.clearRequests(),s.forEach(Ie.putRequest)}},statusColor(e){return e=parseInt(e),200===e?"success--text":e<400?"warning--text":"error--text"},formatDuration(e){return e>=1e3?(e/1e3).toFixed(2)+" s":e+" ms"},stickyBottom(){const e=this.$refs.scroll;e.scrollTop+e.clientHeight>=.98*e.scrollHeight-10&&this.$nextTick((()=>{e.scroll({top:e.scrollHeight,behavior:"smooth"})}))},scrollBottom(){const e=this.$refs.scroll;e.scrollTop=e.scrollHeight},toggleSearch(e){this.active&&((e.ctrlKey||e.metaKey)&&70===e.keyCode?(e.preventDefault(),this.search_enabled=!0,this.$nextTick((()=>{this.$refs.search.focus(),this.$refs.search.$el.querySelector("input").select()}))):27===e.keyCode&&(this.search_enabled=!1,this.clearSearch(),this.$nextTick((()=>{this.scrollBottom()}))))},clearSearch(){this.search_filter=""},filesize:Be(),formatTimestamp:V}},ot=nt,lt=(0,W.Z)(ot,Re,De,!1,null,"f4993d56",null),ct=lt.exports,ut=function(){var e=this,t=e._self._c;return t("div",{staticClass:"scrollable fill-height"},[t("div",{staticClass:"plugin-container absolute-expand overflow-y-auto pa-2"},[e.json?t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.body,expression:"body"}],class:e.codestyle},[t("code",{staticClass:"json"})]):e.plugin.live?t("div",{staticClass:"absolute-expand d-flex"},[t("iframe",{ref:"iframe",staticClass:"flex",attrs:{src:e.frame_src},on:{load:e.frame_loaded}})]):t("div",{domProps:{innerHTML:e._s(e.body)}})]),t(ae.Z,{attrs:{left:"","open-delay":"1200"},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.b0,{attrs:{"hide-on-leave":""}},[t(r.Z,e._g({directives:[{name:"show",rawName:"v-show",value:e.reload_visible,expression:"reload_visible"},{name:"blur",rawName:"v-blur"}],attrs:{small:"",fab:"",fixed:"",right:"",bottom:""},on:{click:function(t){return t.stopPropagation(),e.reload.apply(null,arguments)}}},s),[t(u.Z,{class:{spin:e.loading}},[e._v("mdi-sync")])],1)],1)]}}])},[t("span",[e._v("Reload "+e._s(e.plugin.name))])])],1)},dt=[],ht={name:"Plugin",props:{active:Boolean,plugin:Object},data:()=>({load_uid:null,loaded:!1,loading:!1,reload_visible:!1,body:void 0,json:!1}),computed:{codestyle(){return this.dark_mode?"dark":"light"},frame_src(){return this.load_uid&&`${this.$http.defaults.baseURL}/plugins/${this.plugin.key}?${this.load_uid}`}},watch:{active:{handler(e){e?(setTimeout((()=>{this.reload_visible=!0}),500),this.loaded||this.reload()):this.reload_visible=!1},immediate:!0},codestyle:"syncFrame"},methods:{sendMessage(e){const t=this.$refs.iframe;t&&t.contentWindow.postMessage(e,"*")},syncFrame(){this.sendMessage({plugin:this.plugin.key,host:this.$http.defaults.baseURL,theme:this.codestyle,colors:this.$vuetify.theme.currentTheme})},frame_loaded(){this.frame_src&&(this.loaded=!0,this.loading=!1,this.syncFrame())},reload(){this.active&&!this.loading&&(this.loading=!0,this.plugin.live?this.load_uid=Date.now():this.$http.get("/plugins/"+this.plugin.key).then((({data:e,headers:t})=>{this.loaded=!0,this.json="application/json"===t["content-type"],this.body=this.json?JSON.stringify(e,null,2):e})).finally((()=>{this.loading=!1})))}}},pt=ht,mt=(0,W.Z)(pt,ut,dt,!1,null,"739a4238",null),ft=mt.exports,vt=s(266),gt=s(9256),_t=s(8419),bt=s(6379),yt=s(1378),kt=function(){var e=this,t=e._self._c;return t(R.Z,{attrs:{"max-width":"600"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[t(O.Z,[t(F.EB,{staticClass:"pa-1"},[t(d.Z,{staticClass:"text-center"},[t(l.Z,[e._v("Settings")])],1),t(r.Z,{attrs:{color:"neutral",small:"",icon:"",absolute:"",right:""},on:{click:function(t){e.open=!1}}},[t(u.Z,{attrs:{small:""}},[e._v("mdi-close")])],1)],1),t(D.Z,{attrs:{light:""}}),t(F.ZB,{staticClass:"pa-0 settings-content relative"},[t(d.Z,{staticClass:"absolute-expand"},[t(l.Z,{attrs:{xs3:""}},[t(B.Z,{staticClass:"pt-0 fill-height",attrs:{color:"controls"}},[t(E.Z,{attrs:{mandatory:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.pages,(function(s){return t(N.Z,{key:s},[t(I.km,[t(I.V9,[e._v(e._s(s))])],1)],1)})),1)],1)],1),t(l.Z,{staticClass:"panel px-5"},[0===e.selected?t(gt.Z,[t(bt.Z,{attrs:{row:""},model:{value:e.settings.dark_mode,callback:function(t){e.$set(e.settings,"dark_mode",t)},expression:"settings.dark_mode"}},[t(_t.Z,{attrs:{label:"Light",value:"light","on-icon":"mdi-white-balance-sunny"}}),t(p.Z),t(_t.Z,{attrs:{label:"Dark",value:"dark","on-icon":"mdi-weather-night"}}),t(p.Z),e.supportsThemeDetection?t(_t.Z,{attrs:{label:"Automatic",value:"auto","on-icon":"mdi-theme-light-dark"}}):e._e()],1)],1):e._e(),1===e.selected?t(gt.Z,[t(yt.Z,{attrs:{label:"Disconnect when Network is not selected","hide-details":""},model:{value:e.settings.network.sleep,callback:function(t){e.$set(e.settings.network,"sleep",t)},expression:"settings.network.sleep"}}),t(l.Z,{attrs:{"offset-xs1":""}},[t("small",[e._v("(This helps to prevent unnecessary memory and cpu usage)")])]),t(yt.Z,{attrs:{label:"Sort request parameters","hide-details":""},model:{value:e.settings.network.sort_params,callback:function(t){e.$set(e.settings.network,"sort_params",t)},expression:"settings.network.sort_params"}}),t(h.Z,{staticClass:"mt-2"},[t(vt.Z,{attrs:{cols:"3"}},[t(ie.Z,{directives:[{name:"mask",rawName:"v-mask",value:"#####",expression:"'#####'"}],attrs:{label:"Port","hide-details":""},model:{value:e.settings.port,callback:function(t){e.$set(e.settings,"port",t)},expression:"settings.port"}})],1),t(vt.Z,{attrs:{cols:"4"}},[t(ie.Z,{directives:[{name:"mask",rawName:"v-mask",value:"#####",expression:"'#####'"}],attrs:{label:"Clear requests after","hide-details":""},model:{value:e.settings.network.limit,callback:function(t){e.$set(e.settings.network,"limit",t)},expression:"settings.network.limit"}})],1)],1),t(h.Z,[t(vt.Z,[t(ie.Z,{attrs:{label:"Adapter blacklist","hide-details":""},model:{value:e.settings.adapter_blacklist,callback:function(t){e.$set(e.settings,"adapter_blacklist",t)},expression:"settings.adapter_blacklist"}})],1)],1)],1):e._e()],1)],1)],1)],1)],1)},wt=[];const qt=navigator.userAgent,Zt=-1!==qt.indexOf("Win")||-1!==qt.indexOf("Mac"),xt=Zt&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");var Ct={name:"Settings",props:{value:Boolean,settings:Object},data:()=>({selected:0,pages:["Theme","Network"]}),computed:{open:{get(){return this.value},set(e){this.$emit("input",e)}},supportsThemeDetection(){return!!xt}},watch:{"settings.dark_mode":{handler(e){this.dark_mode="auto"===e?xt.matches:"dark"===e},immediate:!0}},mounted(){xt?.addEventListener("change",this.darkModeObserver)},beforeDestroy(){xt?.removeEventListener("change",this.darkModeObserver)},methods:{darkModeObserver(e){"auto"===this.settings.dark_mode&&(this.dark_mode=e.matches)}}},St=Ct,$t=(0,W.Z)(St,kt,wt,!1,null,"7d701765",null),Tt=$t.exports,jt=function(){var e=this,t=e._self._c;return t(ye.Z,{ref:"devices",staticClass:"device-picker",attrs:{items:e.devices,height:"28","append-icon":"","item-value":"ip","item-text":"name",disabled:!e.devices.length,placeholder:e.devices.length?"Select your device":"No devices detected","menu-props":{top:!0,offsetY:!0,maxHeight:"100%",nudgeTop:8},"return-object":"",outlined:"","hide-details":"","hide-selected":""},scopedSlots:e._u([e.selected?null:{key:"prepend-inner",fn:function(){return[t(l.Z,{attrs:{"align-self-center":"",shrink:"","text-center":""}},[e.devices.length?t("div",{staticClass:"badge controls--text text"},[e._v(e._s(e.devices.length))]):t(u.Z,{staticClass:"neutral--text",attrs:{dense:""}},[e._v("mdi-help-circle-outline")])],1)]},proxy:!0},{key:"selection",fn:function({item:s}){return[t(d.Z,[t(l.Z,{attrs:{shrink:"","align-self-center":"","mr-2":""}},[t(u.Z,{attrs:{dense:""}},[e._v(e._s(e.deviceIcon(s.type)))])],1),t(l.Z,{staticClass:"text-no-wrap overflow-hidden",attrs:{"align-self-center":""}},[e._v(" "+e._s(s.name)+" - "+e._s(s.ip)+" ")])],1)]}},{key:"item",fn:function({item:s}){return[t(d.Z,[t(l.Z,{attrs:{shrink:"","align-self-center":"","mr-4":""}},[t(u.Z,[e._v(e._s(e.deviceIcon(s.type)))])],1),t(l.Z,[t(vt.Z,[t(h.Z,[e._v(e._s(s.name))]),t(h.Z,[s.appId?t(Ke.Z,{attrs:{disabled:""}},[t("small",[e._v(e._s(s.appId)+" ("+e._s(s.version)+")")])]):e._e()],1),t(h.Z,[t("small",[e._v(e._s(s.adapter)+": "+e._s(s.ip))])])],1)],1)],1)]}}],null,!0),model:{value:e.host,callback:function(t){e.host=t},expression:"host"}})},Ot=[],Ft={name:"DevicePicker",props:{value:Object,devices:Array},computed:{host:{get(){return this.value},set(e){this.$emit("input",e)}},selected(){return!!this.devices.find((e=>e.ip===this.host.ip))}},watch:{devices(){this.$refs.devices.$refs.menu.onResize()}},methods:{deviceIcon(e){return{ios:"mdi-apple",android:"mdi-android"}[e]||"mdi-laptop"}}},Rt=Ft,Dt=(0,W.Z)(Rt,jt,Ot,!1,null,null,null),Pt=Dt.exports,Bt=function(){var e=this,t=e._self._c;return t(ie.Z,{staticClass:"ip-field",attrs:{prefix:"IP Address: ",placeholder:"___.___.___.___",height:"28",error:e.ip.includes(":"),outlined:"","hide-details":""},model:{value:e.ip,callback:function(t){e.ip=t},expression:"ip"}})},Nt=[],It={name:"IPTextField",props:{value:Object},computed:{ip:{get(){return this.value.ip||""},set(e){this.$emit("input",{ip:e})}}}},Et=It,Lt=(0,W.Z)(Et,Bt,Nt,!1,null,null,null),zt=Lt.exports;const At={dark_mode:xt?"auto":"dark",network:{sleep:!0,sort_params:!0,limit:"250"},port:"30000",adapter_blacklist:"pdp_ip0 vboxnet4 lo0"};var Vt=s(9669),Mt=s.n(Vt),Ht=s(1939),Jt=s.n(Ht);const Wt=Mt().create({timeout:5e3});i.ZP.use(Jt(),Wt);let Ut=Mt().CancelToken.source();function Kt(e){return Mt().isCancel(e)?new Promise((()=>!1)):Promise.reject(e)}Wt.interceptors.request.use((e=>{if(!Wt.defaults.baseURL)throw new(Mt().Cancel);return e.cancelToken=Ut.token,e}),Kt),Wt.interceptors.response.use((e=>e),Kt);const Qt=()=>{Ut.cancel(),Ut=Mt().CancelToken.source()};var Xt=Wt;function Yt(e){return Xt.get("https://api.github.com/repos/pakerwreah/InspectorWeb/releases/latest").then((({data:t})=>{const{html_url:s,name:i}=t;if(i){const t=i.replace(/[^\d.]/,"");if(e!==t){const i=e.split("."),a=t.split(".");if(i.length===a.length){for(let e=0;e<a.length;e++)if(parseInt(a[e])<parseInt(i[e]))return;return{name:t,url:s}}}}}))}const Gt=[{key:"database",name:"Database"},{key:"network",name:"Network"}],es=8e3;var ts={name:"App",components:{Database:Oe,Network:ct,Plugin:ft,Settings:Tt,DevicePicker:Pt,IPTextField:zt},data:()=>({mounted:!1,plugins:[],current_page:-1,requests:0,settings_popup:!1,settings:At,host:{ip:""},m_devices:[],now:Date.now(),release:void 0}),computed:{electron(){return window.electron},version(){return"1.8.0"},pages(){return Gt.concat(this.plugins)},devices(){return this.m_devices.filter((e=>!this.settings.adapter_blacklist.split(" ").includes(e.adapter))).filter((e=>this.now-e.since<es))},deviceSelected(){return!!this.devices.find((e=>e.ip===this.host.ip))},reloadPlugins(){return(0,q.debounce)((()=>{this.loadPlugins()}),this.electron?100:1500)}},watch:{current_page(e){localStorage.setItem("current_page",e)},settings_popup(e){e||localStorage.setItem("settings",JSON.stringify(this.settings))},host(e){e.ip&&(this.saveHost(e),!this.mounted||this.electron&&!this.deviceSelected||this.reloadPlugins())},deviceSelected(e){e&&(this.saveHost(this.host),this.loadPlugins())},settings({port:e}){if(this.electron){const{ipcRenderer:t}=this.electron;t.removeAllListeners("search-devices"),t.send("search-devices",e),t.on("search-devices",((e,t)=>{const{addresses:s,...i}=t;let a=this.devices;const r=Date.now(),n=["name","adapter","ip","appId","version"];for(const o of s){const e={...i,...o,since:r};a=a.filter((t=>n.some((s=>t[s]!==e[s])))),a.push(e)}this.m_devices=(0,q.orderBy)(a,n)}))}}},created(){this.$http.defaults.baseURL="",setInterval(this.ticker,es)},beforeMount(){this.electron&&this.electron.ipcRenderer.removeAllListeners("search-devices"),this.settings=(0,q.defaultsDeep)(JSON.parse(localStorage.getItem("settings")),At),this.host=JSON.parse(localStorage.getItem("host"))||{},this.host.ip&&this.$nextTick((()=>{this.loadPlugins()}))},mounted(){this.$nextTick((()=>{this.mounted=!0})),Yt(this.version).then((e=>{this.release=e}))},methods:{open:open.bind(window),ticker(){this.now=Date.now()},saveHost(e){this.$http.defaults.baseURL=`http://${e.ip}:${this.settings.port}`,localStorage.setItem("host",JSON.stringify(e))},loadPlugins(){return Qt(),this.$http.get("/plugins").then((({data:e})=>{this.plugins=e})).finally((()=>{const e=parseInt(localStorage.getItem("current_page"));this.current_page=Math.min(Math.max(1,e),this.pages.length)}))},setRequestsCount(e){this.requests=e}}},ss=ts,is=(0,W.Z)(ss,_,b,!1,null,"0874d0ea",null),as=is.exports,rs=s(1557);i.ZP.use(rs.Z);var ns=new rs.Z({icons:{iconfont:"mdi"},theme:{options:{customProperties:!0},themes:{light:{primary:"#2196F3",accent:"#9C27B0",secondary:"#30B1DC",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252",controls:"#FFFFFF",neutral:"#666666",text:"#616161",panel:"#f2f2f2",controls_border:"#D5D5D5"},dark:{primary:"#21CFF3",accent:"#FFE18D",secondary:"#21CFF3",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252",controls:"#424242",neutral:"#CCCCCC",text:"#FFFFFF",panel:"#303030",controls_border:"#494949"}}}});i.ZP.mixin({computed:{dark_mode:{get(){return this.$vuetify.theme.dark},set(e){this.$vuetify.theme.dark=e,localStorage.setItem("dark",JSON.stringify(e))}}}});var os=s(9278);i.ZP.use(os.ZP);var ls=s(1246),cs=s.n(ls);i.ZP.use(cs()),i.ZP.directive("blur",{inserted:function(e){e.onfocus=e=>e.target.blur()}}),new i.ZP({vuetify:ns,render:e=>e(as)}).$mount("#app")},9862:function(){},964:function(){}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=e,function(){s.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];s.O=function(t,i,a,r){if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],r=e[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[i,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,n=i[0],o=i[1],l=i[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var u=l(s)}for(t&&t(i);c<n.length;c++)r=n[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},i=self["webpackChunkinspector"]=self["webpackChunkinspector"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(8601)}));i=s.O(i)})();
//# sourceMappingURL=app.009b51bc.js.map